<% provide(:user, 'employee') %>
<% provide(:title,'Edit Employee')%>


<% if logged_in? %>

  <h1>Welcome
    <%= current_employee.name %>
  </h1>

  <h3>Update Details</h3>

  <div class="row">
    <div class="col-md-6 float-left">
      <%= form_for(@employee) do |f| %>
        <%= image_tag @employee.image.url, :class => 'img1' unless @employee.image.blank? %>
      
        <%= f.label :id ,"Employee Id"%>
        <%= f.text_field :id, :value => ("RP#{@employee.id}"), class: 'form-control',readonly:"readonly" %>
        
        <%= f.label :designation %>
        <%= f.text_field :designation, class: 'form-control',readonly:"readonly" %>

        <%= f.label :email %>
        <%= f.email_field :email, class: 'form-control',readonly:"readonly" %>
        
        <%= f.label :dateofjoin ,"Date of Join"%>
        <%= f.date_field :dateofjoin, class: 'form-control',readonly:"readonly" %> 
        
        <%= f.label :username %>
        <%= f.text_field :username, class: 'form-control',readonly:"readonly" %>
        
        <%= f.label :dateofbirth,"Date of Birth" %>
        <%= f.date_field :dateofbirth, class: 'form-control' %>
        
        <%= f.label :personalemail,"Personal Email" %>
        <%= f.email_field :personalemail, class: 'form-control' %>
        
        <%= f.label :image,"Profile Pic"%>
        <%= f.file_field :image,class: 'form-control' %>

        <%= f.submit "Update", class: "btn btn-primary" %>
      
      <% end %>
    </div>

    <% if @employee.fb_logged_in.nil? || @employee.fb_logged_in == false %>
      <%= link_to "Details from facebook", '/auth/facebook'%>
    <% else %>
      <%= link_to "Logout from facebook",edit_employee_path(@employee,logout: true)%>
    <% end %>
    
    <% if @employee.fb_logged_in == true %>
      <div class="col-md-6 float-right">
        <%= form_for(@employee) do |f| %>

          <%= image_tag @employee.picture, :class => 'img1'%>
          
          <%= f.label :name%>
          <%= f.text_field :fb_name, class: 'form-control',readonly:"readonly" %>
          
          <%= f.label :email %>
          <%= f.email_field :fb_email, class: 'form-control',readonly:"readonly" %>

          <%= f.label :birthday %>
          <%= f.date_field :fb_birthday, class: 'form-control',readonly:"readonly" %>

          <%= f.label :hometown %>
          <%= f.text_field :home_town, class: 'form-control',readonly:"readonly" %>

          <%= f.label :location %>
          <%= f.text_field :fb_location, class: 'form-control',readonly:"readonly"%>

          <%= f.label :lastpost %>
          <%= f.text_field :fb_posts, class: 'form-control',readonly:"readonly" %>

        <% end %>
      </div>
    <% end %>

  </div>
<% end %>

